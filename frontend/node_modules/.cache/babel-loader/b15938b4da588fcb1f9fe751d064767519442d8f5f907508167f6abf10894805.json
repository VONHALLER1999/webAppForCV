{"ast":null,"code":"import{useEffect,useMemo,useRef}from\"react\";import*as d3 from\"d3\";import Rectangle from\"./Rectangle.tsx\";import React from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MARGIN={top:30,right:30,bottom:40,left:50};const BUCKET_NUMBER=70;const BUCKET_PADDING=4;export const HistogramSingle=_ref=>{let{width,height,data}=_ref;const axesRef=useRef(null);const boundsWidth=width-MARGIN.right-MARGIN.left;const boundsHeight=height-MARGIN.top-MARGIN.bottom;// You can adjust the domain or make it dynamic if needed.\nconst domain=[0,100];const xScale=useMemo(()=>{return d3.scaleLinear().domain(domain).range([10,boundsWidth]);},[data,width]);const buckets=useMemo(()=>{const bucketGenerator=d3.bin().value(d=>d).domain(domain).thresholds(xScale.ticks(BUCKET_NUMBER));return bucketGenerator(data);},[xScale,data]);const yScale=useMemo(()=>{const max=Math.max(...buckets.map(bucket=>bucket.length));return d3.scaleLinear().range([boundsHeight,0]).domain([0,max]).nice();},[buckets,height]);// Render axes using D3\nuseEffect(()=>{const svgElement=d3.select(axesRef.current);svgElement.selectAll(\"*\").remove();const xAxisGenerator=d3.axisBottom(xScale);svgElement.append(\"g\").attr(\"transform\",`translate(0,${boundsHeight})`).call(xAxisGenerator);const yAxisGenerator=d3.axisLeft(yScale);svgElement.append(\"g\").call(yAxisGenerator);},[xScale,yScale,boundsHeight]);const allRects=buckets.map((bucket,i)=>{const{x0,x1}=bucket;if(x0===undefined||x1===undefined)return null;return/*#__PURE__*/_jsx(Rectangle,{x:xScale(x0)+BUCKET_PADDING/2,width:xScale(x1)-xScale(x0)-BUCKET_PADDING,y:yScale(bucket.length),height:boundsHeight-yScale(bucket.length)},i);});return/*#__PURE__*/_jsxs(\"svg\",{width:width,height:height,children:[/*#__PURE__*/_jsx(\"g\",{transform:`translate(${MARGIN.left},${MARGIN.top})`,children:allRects}),/*#__PURE__*/_jsx(\"g\",{ref:axesRef,transform:`translate(${MARGIN.left},${MARGIN.top})`})]});};export default HistogramSingle;","map":{"version":3,"names":["useEffect","useMemo","useRef","d3","Rectangle","React","jsx","_jsx","jsxs","_jsxs","MARGIN","top","right","bottom","left","BUCKET_NUMBER","BUCKET_PADDING","HistogramSingle","_ref","width","height","data","axesRef","boundsWidth","boundsHeight","domain","xScale","scaleLinear","range","buckets","bucketGenerator","bin","value","d","thresholds","ticks","yScale","max","Math","map","bucket","length","nice","svgElement","select","current","selectAll","remove","xAxisGenerator","axisBottom","append","attr","call","yAxisGenerator","axisLeft","allRects","i","x0","x1","undefined","x","y","children","transform","ref"],"sources":["/Users/vilhelmgroenbaek/DevProjects/webAppForCV/frontend/src/HistogramSingle.tsx"],"sourcesContent":["import { useEffect, useMemo, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport Rectangle from \"./Rectangle.tsx\";\nimport React from \"react\";\n\nconst MARGIN = { top: 30, right: 30, bottom: 40, left: 50 };\nconst BUCKET_NUMBER = 70;\nconst BUCKET_PADDING = 4;\n\ntype HistogramSingleProps = {\n  width: number;\n  height: number;\n  data: number[];\n};\n\nexport const HistogramSingle = ({ width, height, data }: HistogramSingleProps) => {\n  const axesRef = useRef(null);\n  const boundsWidth = width - MARGIN.right - MARGIN.left;\n  const boundsHeight = height - MARGIN.top - MARGIN.bottom;\n\n  // You can adjust the domain or make it dynamic if needed.\n  const domain: [number, number] = [0, 100];\n  const xScale = useMemo(() => {\n    return d3.scaleLinear().domain(domain).range([10, boundsWidth]);\n  }, [data, width]);\n\n  const buckets = useMemo(() => {\n    const bucketGenerator = d3\n      .bin()\n      .value((d) => d)\n      .domain(domain)\n      .thresholds(xScale.ticks(BUCKET_NUMBER));\n    return bucketGenerator(data);\n  }, [xScale, data]);\n\n  const yScale = useMemo(() => {\n    const max = Math.max(...buckets.map((bucket) => bucket.length));\n    return d3.scaleLinear().range([boundsHeight, 0]).domain([0, max]).nice();\n  }, [buckets, height]);\n\n  // Render axes using D3\n  useEffect(() => {\n    const svgElement = d3.select(axesRef.current);\n    svgElement.selectAll(\"*\").remove();\n\n    const xAxisGenerator = d3.axisBottom(xScale);\n    svgElement\n      .append(\"g\")\n      .attr(\"transform\", `translate(0,${boundsHeight})`)\n      .call(xAxisGenerator);\n\n    const yAxisGenerator = d3.axisLeft(yScale);\n    svgElement.append(\"g\").call(yAxisGenerator);\n  }, [xScale, yScale, boundsHeight]);\n\n  const allRects = buckets.map((bucket, i) => {\n    const { x0, x1 } = bucket;\n    if (x0 === undefined || x1 === undefined) return null;\n    return (\n      <Rectangle\n        key={i}\n        x={xScale(x0) + BUCKET_PADDING / 2}\n        width={xScale(x1) - xScale(x0) - BUCKET_PADDING}\n        y={yScale(bucket.length)}\n        height={boundsHeight - yScale(bucket.length)}\n      />\n    );\n  });\n\n  return (\n    <svg width={width} height={height}>\n      <g transform={`translate(${MARGIN.left},${MARGIN.top})`}>\n        {allRects}\n      </g>\n      <g ref={axesRef} transform={`translate(${MARGIN.left},${MARGIN.top})`} />\n    </svg>\n  );\n};\nexport default HistogramSingle;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}